<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">

	<!-- 등록(가입) -->
	<insert id="join">
		insert into member(
		member_id, member_pw, member_nickname, member_birth, member_gender, member_contact) 
		values(
		#{memberId}, #{memberPw},#{memberNickname}, #{memberBirth},#{memberGender}, #{memberContact})
	</insert>

	<!-- 수정 -->
	<update id="edit">
		update member set
		 member_nickname = #{memberNickname},
		 member_birth = #{memberBirth},
		 member_contact = #{memberContact} 
		 where member_id = #{memberId}
	</update>

	<!-- 비밀번호 변경 -->
	<update id="editByPw">
		update member set member_pw = #{memberPw} where member_id = #{memberId}
	</update>

	<!-- 전체 조회 -->
	<select id="findAll" resultType="MemberDto">
		select * from member
	</select>

	<!-- 상세 조회 -->
	<select id="findByMemberId" resultType="MemberDto">
		select * from member where member_id = #{memberId}
	</select>

	<!-- 삭제 -->
	<delete id="remove">
		delete member where member_id = #{memberId}
	</delete>
	
	<!-- 회원 수 출력 쿼리문 -->
	<select id="count" resultType="int">
		select count(*) from member
	</select>
	
	<!-- 회원 아이디로 회원 닉네임 검색 -->
	<select id="findNicknameById" resultType="MemberDto">
		select member_nickname from member where member_id = #{memberId}
	</select>

  <!-- 관리자가 회원 등급 수정하는 쿼리문 -->
	<update id="updateMemberLevel">
		update member
		<set>
			<if test="dto.memberLevel != null">
				member_level = #{dto.memberLevel}
			</if>
		</set>
		where member_id = #{memberId}
	</update>
</mapper>